(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{2261:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(9268),n=s(1387),l=s(3658),o=s(4274),r=s(8399),i=s(8992),c=s(6564),d=s(5991),h=s(6006),u=s(2171),p=s(102),x=s(6662);let m=async e=>{let t=await fetch("/api/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?await t.json():(console.log("에러낫다! 스샷찍어주실?"),console.log(t),"")},y=async e=>{let t=await fetch("/api/request?id="+e._id+"&password="+e.password,{method:"DELETE",headers:{"Content-Type":"application/json"}});return t.ok?await t.json():(console.log("에러낫다! 스샷찍어주실?"),console.log(t),"")};async function w(){let e=await fetch("api/request",{next:{revalidate:1}});return e.ok?e.json():(console.log("에러낫다! 스샷찍어주실?"),console.log(e),[])}function j(e){let{userData:t,requestData:s}=e,[j,f]=(0,h.useState)(s),[b,Z]=(0,h.useState)(""),[g,v]=(0,h.useState)(""),[k,N]=(0,h.useState)(""),C=t.map(e=>e.name),_=e=>{Z(e.target.value.slice(0,50))},q=e=>{v(e.target.value)},E=async()=>{let e=await w();f(e)},S=async()=>{let e=await m({requester:k,request:b,password:g});e?(f([{requester:k,request:b,password:g,_id:e},...j]),Z(""),v(""),N("")):await E()},T=async e=>{let t=await y(e);"success"===t?f(j.filter(t=>t._id!==e._id)):await E()};return(0,h.useEffect)(()=>{let e=setInterval(()=>{E()},18e4);return()=>{clearInterval(e)}},[]),(0,a.jsxs)(r.Z,{component:d.Z,style:{minWidth:335},children:[(0,a.jsxs)("div",{className:"search",style:{margin:20},children:[(0,a.jsx)(x.Z,{disablePortal:!0,id:"combo-box-gem",options:C,sx:{width:300},value:k,onChange:(e,t)=>{N(t||"")},renderInput:e=>(0,a.jsx)(u.Z,{...e,label:"케릭명"})}),(0,a.jsx)(u.Z,{style:{width:"100%"},multiline:!0,maxRows:"3",label:"해줘내용",variant:"outlined",value:b,onChange:_}),(0,a.jsx)(u.Z,{style:{width:"250px"},label:"비번",type:"password",variant:"outlined",onChange:q}),(0,a.jsx)(p.Z,{onClick:S,children:"요청"})]}),(0,a.jsxs)(n.Z,{className:"text-left text-sm font-light",children:[(0,a.jsx)(i.Z,{className:"border-b font-medium dark:border-neutral-500",children:(0,a.jsxs)(c.Z,{style:{backgroundColor:"#626262"},children:[(0,a.jsx)(o.Z,{style:{maxWidth:250},className:"px-2 py-4",children:"케릭명"}),(0,a.jsx)(o.Z,{className:"px-6 py-4",children:'"해줘"'}),(0,a.jsx)(o.Z,{className:"px-2 py-4",style:{width:150},children:"버튼"})]})}),(0,a.jsx)(l.Z,{children:j.map(e=>(0,a.jsxs)(c.Z,{className:"border-b dark:border-neutral-500",sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,a.jsx)(o.Z,{style:{maxWidth:250},className:"px-2 py-2",component:"th",scope:"row",children:e.requester}),(0,a.jsx)(o.Z,{style:{maxHeight:150,overflowY:"scroll"},className:"px-6 py-4 ",component:"th",scope:"row",children:(0,a.jsx)("pre",{style:{whiteSpace:"break-spaces"},children:e.request})}),(0,a.jsxs)(o.Z,{style:{maxWidth:250},className:"px-2 py-4",component:"th",scope:"row",children:[(0,a.jsx)(p.Z,{variant:"outlined",onClick:()=>{let t="@".concat(e.requester," 당신의 해줘:").concat(e.request," 내가 해줌!");navigator.clipboard.writeText(t).then(function(){alert("복사완료 : "+t)},function(e){alert("복사가 안됬어요. 직접연락해주세요.")})},children:"귓말복사"}),(0,a.jsx)(p.Z,{variant:"outlined",onClick:()=>{let t=prompt("삭제할거에요? 비번적어주세요");null!==t&&(console.log("row",e),T({...e,password:t}))},children:"삭제"})]})]},e._id))})]})]})}},6806:function(e,t,s){Promise.resolve().then(s.bind(s,2261))}},function(e){e.O(0,[612,667,961,744],function(){return e(e.s=6806)}),_N_E=e.O()}]);